var j=Object.defineProperty;var u=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var M=(t,a,n)=>a in t?j(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,E=(t,a)=>{for(var n in a||(a={}))x.call(a,n)&&M(t,n,a[n]);if(u)for(var n of u(a))C.call(a,n)&&M(t,n,a[n]);return t};var A=(t,a)=>{var n={};for(var s in t)x.call(t,s)&&a.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&u)for(var s of u(t))a.indexOf(s)<0&&C.call(t,s)&&(n[s]=t[s]);return n};import{_}from"./index.cebb5bb7.js";import{G as R,b as I,O as D,h as K,j as $,k as U,l as W,m as V,n as F}from"./index.5895d29d.js";import{k,j as N,a4 as G,K as Y,u as X,h as Z,r as m,R as e,n as i,l as c,a5 as q,N as J,a6 as Q,F as d,Z as b,s as P,t as p,C as e1,p as t1,b as S,L as T,A as n1,a7 as a1}from"./vendor.a586f42d.js";import{u as o1}from"./useTitle.41c08ddb.js";function r1(t){return R({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"title",attr:{},child:[]},{tag:"path",attr:{d:"M5.385 6.136c0 .807-.644 1.461-1.438 1.461s-1.438-.654-1.438-1.461.644-1.461 1.438-1.461 1.438.654 1.438 1.461zm-1.438 2.63c-.794 0-1.438.654-1.438 1.461s.644 1.461 1.438 1.461 1.438-.654 1.438-1.461-.644-1.461-1.438-1.461zm5.465-2.63c0 .807-.644 1.461-1.438 1.461s-1.438-.654-1.438-1.461.644-1.461 1.438-1.461 1.438.654 1.438 1.461zm-.35 0c0-.613-.488-1.111-1.088-1.111s-1.088.499-1.088 1.111.488 1.111 1.088 1.111 1.088-.498 1.088-1.111zm-1.088 5.592c.794 0 1.438-.654 1.438-1.461s-.644-1.461-1.438-1.461-1.438.654-1.438 1.461.643 1.461 1.438 1.461zm5.464-5.592c0 .807-.644 1.461-1.438 1.461s-1.438-.654-1.438-1.461.644-1.461 1.438-1.461 1.438.654 1.438 1.461zm-.35 0c0-.613-.488-1.111-1.088-1.111s-1.088.498-1.088 1.111S11.4 7.247 12 7.247s1.088-.498 1.088-1.111zm.35-4.675c0 .807-.644 1.461-1.438 1.461s-1.438-.654-1.438-1.461S11.206 0 12 0s1.438.654 1.438 1.461zm-.35 0C13.088.848 12.6.35 12 .35s-1.088.498-1.088 1.111S11.4 2.572 12 2.572s1.088-.498 1.088-1.111zm.35 8.806c0 .807-.644 1.461-1.438 1.461s-1.438-.654-1.438-1.461.644-1.461 1.438-1.461 1.438.654 1.438 1.461zm-.35 0c0-.613-.488-1.111-1.088-1.111s-1.088.498-1.088 1.111.488 1.111 1.088 1.111 1.088-.499 1.088-1.111zm4.376-4.131c0 .807-.644 1.461-1.438 1.461s-1.438-.654-1.438-1.461.644-1.461 1.438-1.461 1.438.654 1.438 1.461zm-.35 0c0-.613-.488-1.111-1.088-1.111s-1.088.498-1.088 1.111.488 1.111 1.088 1.111 1.088-.498 1.088-1.111zm2.939 1.461c.794 0 1.438-.654 1.438-1.461s-.644-1.461-1.438-1.461-1.438.654-1.438 1.461.644 1.461 1.438 1.461zm-4.027 1.209c-.794 0-1.438.654-1.438 1.461s.644 1.461 1.438 1.461 1.438-.654 1.438-1.461-.643-1.461-1.438-1.461zm4.027 0c-.794 0-1.438.654-1.438 1.461s.644 1.461 1.438 1.461 1.438-.654 1.438-1.461-.644-1.461-1.438-1.461zM3.947 12.857a1.45 1.45 0 0 0-1.438 1.461c0 .807.644 1.461 1.438 1.461s1.438-.654 1.438-1.461a1.45 1.45 0 0 0-1.438-1.461zm5.465 1.5c0 .807-.644 1.461-1.438 1.461s-1.438-.654-1.438-1.461.644-1.461 1.438-1.461 1.438.655 1.438 1.461zm-.35 0c0-.613-.488-1.111-1.088-1.111s-1.088.498-1.088 1.111.488 1.111 1.088 1.111 1.088-.498 1.088-1.111zM12 12.896c-.794 0-1.438.654-1.438 1.461s.644 1.461 1.438 1.461 1.438-.654 1.438-1.461-.644-1.461-1.438-1.461zm5.464 1.461c0 .807-.644 1.461-1.438 1.461s-1.438-.654-1.438-1.461.644-1.461 1.438-1.461 1.438.655 1.438 1.461zm-.35 0c0-.613-.488-1.111-1.088-1.111s-1.088.498-1.088 1.111.488 1.111 1.088 1.111 1.088-.498 1.088-1.111zm2.939-1.461c-.794 0-1.438.654-1.438 1.461s.644 1.461 1.438 1.461 1.438-.654 1.438-1.461-.644-1.461-1.438-1.461zM3.947 16.948c-.794 0-1.438.654-1.438 1.461s.644 1.461 1.438 1.461 1.438-.654 1.438-1.461-.644-1.461-1.438-1.461zm5.465 1.5c0 .807-.644 1.461-1.438 1.461s-1.438-.654-1.438-1.461.644-1.461 1.438-1.461 1.438.654 1.438 1.461zm-.35 0c0-.613-.488-1.111-1.088-1.111s-1.088.498-1.088 1.111.488 1.111 1.088 1.111 1.088-.498 1.088-1.111zm4.376 0c0 .807-.644 1.461-1.438 1.461s-1.438-.654-1.438-1.461.644-1.461 1.438-1.461 1.438.654 1.438 1.461zm-.35 0c0-.613-.488-1.111-1.088-1.111s-1.088.498-1.088 1.111.488 1.111 1.088 1.111 1.088-.498 1.088-1.111zm.35 4.091c0 .807-.644 1.461-1.438 1.461s-1.438-.654-1.438-1.461.644-1.461 1.438-1.461 1.438.654 1.438 1.461zm-.35 0c0-.613-.488-1.111-1.088-1.111s-1.088.498-1.088 1.111S11.4 23.65 12 23.65s1.088-.498 1.088-1.111zm4.376-4.091c0 .807-.644 1.461-1.438 1.461s-1.438-.654-1.438-1.461.644-1.461 1.438-1.461 1.438.654 1.438 1.461zm-.35 0c0-.613-.488-1.111-1.088-1.111s-1.088.498-1.088 1.111.488 1.111 1.088 1.111 1.088-.498 1.088-1.111zm2.939-1.461c-.794 0-1.438.654-1.438 1.461s.644 1.461 1.438 1.461 1.438-.654 1.438-1.461-.644-1.461-1.438-1.461z"}}]})(t)}function s1(t){return R({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M19.002 3h-14c-1.103 0-2 .897-2 2v4h2V5h14v14h-14v-4h-2v4c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2V5c0-1.103-.898-2-2-2z"}},{tag:"path",attr:{d:"m11 16 5-4-5-4v3.001H3v2h8z"}}]})(t)}const l1=m.exports.lazy(()=>_(()=>import(""+(window.__dynamicImportHandler__||function(t){return t})("./login.644c97da.js")+""),(window.__dynamicImportPreload__ || function(importer) { return importer; })(["assets/login.644c97da.js","assets/vendor.a586f42d.js","assets/index.5895d29d.js","assets/index.0d01f00c.css","assets/index.cebb5bb7.js"]))),L=m.exports.lazy(()=>_(()=>import(""+(window.__dynamicImportHandler__||function(t){return t})("./settings.da210571.js")+""),(window.__dynamicImportPreload__ || function(importer) { return importer; })(["assets/settings.da210571.js","assets/vendor.a586f42d.js","assets/index.5895d29d.js","assets/index.0d01f00c.css","assets/index.cebb5bb7.js","assets/form-item.7b3d0d3e.js"]))),c1=m.exports.lazy(()=>_(()=>import(""+(window.__dynamicImportHandler__||function(t){return t})("./accounts.3d01de00.js")+""),(window.__dynamicImportPreload__ || function(importer) { return importer; })(["assets/accounts.3d01de00.js","assets/vendor.a586f42d.js","assets/index.5895d29d.js","assets/index.0d01f00c.css","assets/index.cebb5bb7.js","assets/form-item.7b3d0d3e.js","assets/copy-clip.08e8f9de.js"]))),i1=m.exports.lazy(()=>_(()=>import(""+(window.__dynamicImportHandler__||function(t){return t})("./metas.769e8d15.js")+""),(window.__dynamicImportPreload__ || function(importer) { return importer; })(["assets/metas.769e8d15.js","assets/vendor.a586f42d.js","assets/index.5895d29d.js","assets/index.0d01f00c.css","assets/index.cebb5bb7.js","assets/form-item.7b3d0d3e.js"]))),f=[{name:"Settings",to:"settings",icon:W,children:[{name:"Frontend",to:"settings/0",component:L},{name:"Backend",to:"settings/1",component:L}]},{name:"Accounts",to:"accounts",icon:V,component:c1},{name:"Meta",to:"meta",icon:r1,component:i1}],B=(t,a=[])=>(t.forEach(n=>{a.push(n),n.children&&B(n.children,a)}),a);function h1(){const t={};for(const r of f)r.children&&(t[r.name]=k());const a=k(),{t:n}=N(),s=G(),h=Y(),z=X(),y=Z();o1(n("Disk Manage")),m.exports.useEffect(()=>{I.post("login").then(r=>{const o=r.data;let l=s.url;l.endsWith("/")||(l=l+"/"),o.code===401?h.push(`${l}login`):s.url===z.pathname&&h.push(`${l}settings/0`)})},[z.pathname]);const g=r=>{const w=r,{icon:o,children:l}=w,H=A(w,["icon","children"]),O=r.to?T:i;return e.createElement(O,{to:`${s.url}/${r.to}`,onClick:()=>{r.to&&(document.title=`${l} - ${n("Disk Manage")}`,a.onClose())}},e.createElement(d,E({align:"center",px:"4",pl:"8",py:"3",cursor:"pointer",color:c("inherit","gray.400"),_hover:{bg:c("gray.100","gray.900"),color:c("gray.900","gray.200")},role:"group",fontWeight:"semibold",transition:".15s ease"},H),o&&e.createElement(p,{mr:"2",boxSize:"4",_groupHover:{color:c("gray.600","gray.300")},as:o}),l))},v=r=>e.createElement(i,E({as:"nav",pos:"fixed",top:"0",left:"0",zIndex:"sticky",h:"full",pb:"10",overflowX:"hidden",overflowY:"auto",bg:c("white","gray.800"),borderColor:c("inherit","gray.700"),borderRightWidth:"1px",w:"48",shadow:"md"},r),e.createElement(T,{to:"/@manage"},e.createElement(d,{px:"4",py:"5",align:"center"},e.createElement(n1,{fontSize:"2xl",ml:"2",color:c("brand.500","white"),fontWeight:"semibold"},"Disk ",n("Manage")))),e.createElement(d,{direction:"column",as:"nav",fontSize:"sm",color:"gray.600","aria-label":"Main Navigation"},f.map(o=>o.children?e.createElement(i,{key:o.name},e.createElement(g,{icon:o.icon,onClick:t[o.name].onToggle},n(o.name),e.createElement(p,{as:F,ml:"auto",transform:t[o.name].isOpen?"rotate(90deg)":""})),e.createElement(a1,{in:t[o.name].isOpen},o.children.map(l=>e.createElement(g,{pl:"12",py:"2",to:l.to,icon:l.icon,key:l.name},n(l.name))))):e.createElement(g,{to:o.to,icon:o.icon,key:o.name},n(o.name)))));return e.createElement(i,{as:"section",bg:c("gray.50","gray.700"),minH:"100vh"},e.createElement(D,null),e.createElement(v,{display:{base:"none",md:"unset"}}),e.createElement(q,{isOpen:a.isOpen,onClose:a.onClose,placement:"left"},e.createElement(J,null),e.createElement(Q,null,e.createElement(v,{w:"full",borderRight:"none"}))),e.createElement(i,{ml:{base:0,md:48},transition:".3s ease"},e.createElement(d,{as:"header",align:"center",justify:"space-between",w:"full",px:"4",bg:c("white","gray.800"),borderBottomWidth:"1px",borderColor:c("inherit","gray.700"),h:"14",shadow:"md"},e.createElement(b,{"aria-label":"Menu",display:{base:"inline-flex",md:"none"},onClick:a.onOpen,icon:e.createElement(K,null),size:"sm"}),e.createElement(i,{w:"96",display:{base:"none",md:"flex"}}),e.createElement(d,{align:"center"},e.createElement(P,{shouldWrapChildren:!0,hasArrow:!0,placement:"bottom",label:n("clear buffer")},e.createElement(b,{colorScheme:"whiteAlpha","aria-label":n("clear buffer"),icon:e.createElement(p,{boxSize:6,color:"gray.500",as:$}),onClick:()=>{I.get("clear_cache").then(r=>{const o=r.data;o.code===200?y({title:n(o.message),status:"success",duration:3e3,isClosable:!0}):y({title:n(o.message),status:"error",duration:3e3,isClosable:!0})})}})),e.createElement(P,{shouldWrapChildren:!0,hasArrow:!0,placement:"bottom",label:n("logout")},e.createElement(b,{onClick:()=>{U(""),h.push(`${s.url}/login`)},colorScheme:"blank","aria-label":n("logout"),icon:e.createElement(p,{boxSize:6,color:"gray.500",as:s1})})))),e.createElement(i,{as:"main",p:"2"},e.createElement(i,{borderWidth:"1px",borderStyle:"dashed",rounded:"md",h:"calc( 100vh - 80px)",overflowY:"auto",p:"2"},e.createElement(m.exports.Suspense,{fallback:e.createElement(e1,{h:"full"},e.createElement(t1,null))},B(f).map(r=>r.component&&e.createElement(S,{path:`${s.url}/${r.to}`,key:r.name},e.createElement(r.component,null))),e.createElement(S,{path:`${s.url}/login`},e.createElement(l1,null)))))))}export{h1 as default};
