import{d as j,r as i,a,b6 as o,j as t,bf as u,c5 as x,m as I,B as c,bd as g,n as l,I as L,a8 as D,a6 as E}from"./index.0f8e5364.js";import{n as F}from"./index.1db66847.js";import{c as N}from"./useUtil.0653d77c.js";import{G as T}from"./index.452774cf.js";import{I as q}from"./SettingItem.ac560db4.js";import"./api.49cbe88e.js";import"./index.dbbd6d06.js";import"./LinkWithBase.ed43b423.js";import"./item_type.be442da4.js";const te=()=>{const r=j();F("manage.sidemenu.other");const[d,m]=i(""),[p,h]=i(""),[_,k]=i(""),[y,f]=i(""),[b,w]=i([]),[A,G]=a(()=>o.get(`/admin/setting/list?groups=${T.ARIA2},${T.SINGLE}`)),[U,Q]=a(()=>o.post("/admin/setting/set_aria2",{uri:d(),secret:p()})),[B,H]=a(()=>o.post("/admin/setting/set_qbit",{url:_()}));(async()=>{const e=await G();g(e,n=>{var $,v,S,C;m((($=n.find(s=>s.key==="aria2_uri"))==null?void 0:$.value)||""),h(((v=n.find(s=>s.key==="aria2_secret"))==null?void 0:v.value)||""),f(((S=n.find(s=>s.key==="token"))==null?void 0:S.value)||""),k(((C=n.find(s=>s.key==="qbittorrent_url"))==null?void 0:C.value)||""),w(n)})})();const[M,O]=a(()=>o.post("/admin/setting/reset_token")),{copy:R}=N();return t(E,{get loading(){return A()},get children(){return[t(u,{mb:"$2",get children(){return r("settings_other.aria2")}}),t(x,{gap:"$2",columns:{"@initial":1,"@md":2},get children(){return[t(q,I(()=>b().find(e=>e.key==="aria2_uri"),{get value(){return d()},onChange:e=>m(e)})),t(q,I(()=>b().find(e=>e.key==="aria2_secret"),{get value(){return p()},onChange:e=>h(e)}))]}}),t(c,{my:"$2",get loading(){return U()},onClick:async()=>{const e=await Q();g(e,n=>{l.success(`${r("settings_other.aria2_version")} ${n}`)})},get children(){return r("settings_other.set_aria2")}}),t(u,{my:"$2",get children(){return r("settings.qbittorrent_url")}}),t(L,{get value(){return _()},onInput:e=>{k(e.currentTarget.value)}}),t(c,{my:"$2",get loading(){return B()},onClick:async()=>{const e=await H();g(e,n=>{l.success(n)})},get children(){return r("settings_other.set_qbit")}}),t(u,{my:"$2",get children(){return r("settings.token")}}),t(L,{get value(){return y()},readOnly:!0}),t(D,{my:"$2",spacing:"$2",get children(){return[t(c,{onClick:()=>{R(y())},get children(){return r("settings_other.copy_token")}}),t(c,{colorScheme:"danger",get loading(){return M()},onClick:async()=>{const e=await O();g(e,n=>{l.success(r("settings_other.reset_token_success")),f(n)})},get children(){return r("settings_other.reset_token")}})]}})]}})};export{te as default};
