import{b as C,aS as z,bz as B,_ as F,bA as $,f as D,c as L,a0 as U,p as E,bB as n,a2 as u,bC as P,bD as G,n as I,aB as T,aw as w}from"./index.726c3413.js";const V=(t,...l)=>{},S=new Map,q=(t,l)=>{S.set(t,l)},W=t=>{window.scroll({top:S.get(t)||0,behavior:"smooth"}),V("recoverScroll",t,S.get(t))};let H=!0,d;function N(t,l,r="replaceState"){let o=r==="location"?location.href:location.hash;if(!o.includes("?"))o=`${o}?${t}=${l}`;else if(!o.includes(t))o=`${o}&${t}=${l}`;else{const h=`(\\?|&|#)${t}([^&|^#]*)(&|$|#)`;o=o.replace(new RegExp(h),"$1"+t+"="+l+"$3")}r==="location"&&(location.href=o),r==="pushState"&&history.pushState({},"",o),r==="replaceState"&&history.replaceState({},"",o)}function O(t){for(var l=window.location.search.substring(1),r=l.split("&"),o=0;o<r.length;o++){var h=r[o].split("=");if(h[0]==t)return h[1]}return""}const b={};let c=1;const J=()=>c,x=()=>{const t=$();c=1,t.type==="pagination"&&N("page",1)},K=()=>{const{pathname:t,to:l}=C(),[,r]=z(e=>B(e,F())),o=$();o.type==="pagination"&&O("page")&&(c=parseInt(O("page")));const[,h]=z(e=>{const s={index:e==null?void 0:e.index,size:e==null?void 0:e.size};return D(e==null?void 0:e.path,F(),s.index,s.size,e==null?void 0:e.force,new L.CancelToken(function(i){d=i}))}),m=(e,s=!0,a=!1)=>{a&&(e=E(t(),e)),s?b[e]=!0:delete b[e]};let R=!1;const M=(e,s,a)=>{d==null||d(),R=s!=null?s:!1,v(""),b[e]?p(e,c,void 0,void 0,a):y(e)},y=async e=>{n.setState(u.FetchingObj);const s=await r(e);P(s,a=>{var i;n.setObj(a),n.setProvider(a.provider),a.is_dir?(m(e),p(e,c)):(n.setReadme(a.readme),n.setHeader(a.header),n.setRelated((i=a.related)!=null?i:[]),n.setRawUrl(a.raw_url),n.setState(u.File))},v)},p=async(e,s,a,i=!1,_)=>{a||(a=o.size),a!==void 0&&o.type==="all"&&(a=void 0),c=s!=null?s:1,n.setState(i?u.FetchingMore:u.FetchingObjs);const A=await h({path:e,index:s,size:a,force:_});P(A,f=>{var j;i?G(f.content):(n.setObjs((j=f.content)!=null?j:[]),n.setTotal(f.total)),n.setReadme(f.readme),n.setHeader(f.header),n.setWrite(f.write),n.setProvider(f.provider),n.setState(u.Folder),i&&(s!=null?s:1)>1||W(e)},v)},v=(e,s)=>{if(s===403)n.setState(u.NeedPassword),R&&I.error(e);else{if(H&&e.endsWith("object not found")){H=!1,l(t().replace(T().base_path,""));return}n.setErr(e)}},g=(e,s,a=!1)=>{p(t(),e,s,a)};return{handlePathChange:M,setPathAs:m,refresh:(e,s)=>{M(t(),e,s)},pageChange:g,loadMore:()=>{g(c+1,void 0,!0)},allLoaded:()=>c>=Math.ceil(U.total/o.size)}};function X(t){return w({a:{viewBox:"0 0 24 24"},c:'<path fill="none" d="M0 0h24v24H0z"/><path d="M16 2l5 5v14.008a.993.993 0 01-.993.992H3.993A1 1 0 013 21.008V2.992C3 2.444 3.445 2 3.993 2H16zm-3 10h3l-4-4-4 4h3v4h2v-4z"/>'},t)}function Y(t){return w({a:{viewBox:"0 0 24 24"},c:'<path fill="none" d="M0 0h24v24H0z"/><path d="M12.414 5H21a1 1 0 011 1v14a1 1 0 01-1 1H3a1 1 0 01-1-1V4a1 1 0 011-1h7.414l2 2zM13 13h3l-4-4-4 4h3v4h2v-4z"/>'},t)}function Z(t){return w({a:{viewBox:"0 0 24 24"},c:'<path fill="none" d="M0 0h24v24H0z"/><path d="M5.463 4.433A9.961 9.961 0 0112 2c5.523 0 10 4.477 10 10 0 2.136-.67 4.116-1.81 5.74L17 12h3A8 8 0 006.46 6.228l-.997-1.795zm13.074 15.134A9.961 9.961 0 0112 22C6.477 22 2 17.523 2 12c0-2.136.67-4.116 1.81-5.74L7 12H4a8 8 0 0013.54 5.772l.997 1.795z"/>'},t)}export{Z as R,x as a,W as b,Y as c,X as d,N as e,J as g,q as r,K as u};
