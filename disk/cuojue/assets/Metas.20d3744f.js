import{f as e,bt as T,u as k,a as C,b4 as l,q as M,c4 as S,a7 as o,B as i,a4 as B,c5 as v,c6 as F,c7 as d,C as g,c8 as u,c9 as x,ca as a,bc as h,n as D,a2 as H}from"./index.26595e72.js";import{u as m}from"./useT.82af320b.js";import{b as L}from"./useTitle.ba06eb5e.js";import{D as R}from"./DeletePopover.19d69c12.js";const q=r=>{const n=m();return e(T,{get colorScheme(){return r.yes?"success":"danger"},get children(){return n(`global.${r.yes?"yes":"no"}`)}})},W=()=>{const r=m();L("manage.sidemenu.metas");const{to:n}=k(),[p,b]=C(()=>l.get("/admin/meta/list")),[f,w]=M([]),s=async()=>{const t=await b();h(t,c=>w(c.content))};s();const[$,y]=S(t=>l.post(`/admin/meta/delete?id=${t}`));return e(H,{spacing:"$2",alignItems:"start",w:"$full",get children(){return[e(o,{spacing:"$2",get children(){return[e(i,{colorScheme:"accent",get loading(){return p()},onClick:s,get children(){return r("global.refresh")}}),e(i,{onClick:()=>{n("/@manage/metas/add")},get children(){return r("global.add")}})]}}),e(B,{w:"$full",overflowX:"auto",get children(){return e(v,{highlightOnHover:!0,dense:!0,get children(){return[e(F,{get children(){return e(d,{get children(){return[e(g,{each:["path","password","write"],children:t=>e(u,{get children(){return r(`metas.${t}`)}})}),e(u,{get children(){return r("global.operations")}})]}})}}),e(x,{get children(){return e(g,{get each(){return f()},children:t=>e(d,{get children(){return[e(a,{get children(){return t.path}}),e(a,{get children(){return t.password}}),e(a,{get children(){return e(q,{get yes(){return t.write}})}}),e(a,{get children(){return e(o,{spacing:"$2",get children(){return[e(i,{onClick:()=>{n(`/@manage/metas/edit/${t.id}`)},get children(){return r("global.edit")}}),e(R,{get name(){return t.path},get loading(){return $()===t.id},onClick:async()=>{const c=await y(t.id);h(c,()=>{D.success(r("global.delete_success")),s()})}})]}})}})]}})})}})]}})}})]}})};export{W as default};
